
var str = `30.82888552337784 -97.70398767575671
|30.76620067372263 -97.60360244114554
|30.874678794353265 -97.6465114384755
|30.91120431586375 -97.62247324851552
|30.88049837177727 -97.64252031146134`;

var dat = `C_Existing2 phases=1 bus1=X_B55624_Cust1-C.3 kV=0.24 kVA=12.2 irradiance=1 Pmpp=11.1 pf=1 %cutin=0.1 %cutout=0.1 !yearly=PV_18_22
|B_Existing3 phases=1 bus1=X_B60964_Cust1-B.2 kV=0.24 kVA=11 irradiance=1 Pmpp=10 pf=1 %cutin=0.1 %cutout=0.1 !yearly=PV_24_29
|C_Existing5 phases=1 bus1=X_B61252_Cust1-C.3 kV=0.24 kVA=22 irradiance=1 Pmpp=20 pf=1 %cutin=0.1 %cutout=0.1 !yearly=PV_25_22
|B_Existing7 phases=1 bus1=X_B4870_Cust1-B.2 kV=0.24 kVA=11 irradiance=1 Pmpp=10 pf=1 %cutin=0.1 %cutout=0.1 !yearly=PV_12_15
|A_Existing9 phases=1 bus1=X_B66452_Cust1-A.1 kV=0.24 kVA=11 irradiance=1 Pmpp=10 pf=1 %cutin=0.1 %cutout=0.1 !yearly=PV_30_29`;
var pvs = {}
var j = 0;
var m = ["B41240", "B4982", "B2532", "B22569", "B56446", "B23406", "B5185", "B36183", "B62294", "B60940"];
var data = dat.split("|");
str.split("|").forEach(function(e) {
    var [lat, lng] = e.split(" ");
    var [name, phases, bus, kV, kVA, irradiance, pmpp, pf, cutin, cutout, yearly] = data[j].split(' ');
    var phase = bus.split(".")[1];
    pvs[j+ 1] = {
        lat: lat,
        lng: lng,
        transformer: j + 1,
        bus: m[j],
        kV: kV.split("=")[1],
        kVA: kVA.split("=")[1],
        phase: phase
    }
    j++;
});

console.log(JSON.stringify(pvs));


// var goodOnes = [20, 21, 24, 25, 26, 27, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 55, 56, 57, 58, 59, 60, 62, 63, 64, 65, 66, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 79, 80, 81, 82, 85, 86, 87, 89, 90, 91, 93, 94, 95, 96, 97, 98,
// 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 128, 129, 130, 131, 133, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 152, 153, 154, 155, 157,
// 158, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 176, 177, 178, 179, 180, 182, 183, 184, 185, 186, 187, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207]

// var users = {}
// var str = `30.82789052835384 -97.70267875775744
// |30.826158475380275 -97.70338686093737
// |30.8255319804397 -97.70581157788683
// |30.76664317889992 -97.59433272679007
// |30.761185472858887 -97.58969786961234
// |30.756170010694238 -97.59501937229788
// |30.874273620739686 -97.64277780352677
// |30.875746971123018 -97.63977372943009
// |30.878362112263634 -97.64033162890519
// |30.911130676154684 -97.61749506858388
// |30.907154047712858 -97.61698008445302
// |30.90420829048404 -97.62006998923817
// |30.88289239911343 -97.64316404162491
// |30.88484440789439 -97.64118993578995
// |30.884660257821835 -97.6358684331044
// |30.79765117332971 -97.72587280662259
// |30.79278507338816 -97.72724609763821
// |30.79042566354278 -97.73273926170071
// |30.854733195889782 -97.69156416177549
// |30.853738468849595 -97.69027670144834
// |30.852412150080923 -97.69104917764463
// |30.94954378735026 -97.5133350512624
// |30.952488148384962 -97.50681191893818
// |30.9582293914042 -97.50801354857686
// |30.662415686065778 -97.53651250346826
// |30.658797926728603 -97.53282178386377
// |30.659831586071874 -97.5279294346206
// |30.89508737291889 -97.46239231241708
// |30.891404698073785 -97.46110485208993
// |30.88956330754268 -97.46625469339853`

// var m = ["B41240", "B4982", "B2532", "B22569", "B56446", "B23406", "B5185", "B36183", "B62294", "B60940"];
// var j = 0;
// str.split("|").forEach(function(e) {
//     var [lat, lng] = e.split(" ");
//     var trans = Math.floor(j / 3) + 1;
//     users[j + 1] = {
//         lat: lat,
//         lng: lng,
//         userID: goodOnes[j],
//         transformer: trans,
//         bus: m[trans - 1]
//     }
//     j++;
// });
//
// console.log(JSON.stringify(users));

/*

TRANS 1:
30.82888552337784 -97.70398767575671

30.82789052835384 -97.70267875775744
30.826158475380275 -97.70338686093737
30.8255319804397 -97.70581157788683

TRANS 2:
30.76620067372263 -97.60360244114554

30.76664317889992 -97.59433272679007
30.761185472858887 -97.58969786961234
30.756170010694238 -97.59501937229788

TRANS 3:
30.874678794353265 -97.6465114384755

30.874273620739686 -97.64277780352677
30.875746971123018 -97.63977372943009
30.878362112263634 -97.64033162890519

TRANS 4:
30.91120431586375 -97.62247324851552

30.911130676154684 -97.61749506858388
30.907154047712858 -97.61698008445302
30.90420829048404 -97.62006998923817

TRANS 5:
30.88049837177727 -97.64252031146134

30.88289239911343 -97.64316404162491
30.88484440789439 -97.64118993578995
30.884660257821835 -97.6358684331044

TRANS 6:
30.8017797922319 -97.72853355796536

30.79765117332971 -97.72587280662259
30.79278507338816 -97.72724609763821
30.79042566354278 -97.73273926170071

TRANS 7:
30.85436477967043 -97.69321640252866

30.854733195889782 -97.69156416177549
30.853738468849595 -97.69027670144834
30.852412150080923 -97.69104917764463

TRANS 8:
30.951310414859716 -97.52002984496357

30.94954378735026 -97.5133350512624
30.952488148384962 -97.50681191893818
30.9582293914042 -97.50801354857686

TRANS 9:
30.666328620236364 -97.53582585796045

30.662415686065778 -97.53651250346826
30.658797926728603 -97.53282178386377
30.659831586071874 -97.5279294346206


TRANS 10:
30.89641310119238 -97.46814296854501

30.89508737291889 -97.46239231241708
30.891404698073785 -97.46110485208993
30.88956330754268 -97.46625469339853
*/
